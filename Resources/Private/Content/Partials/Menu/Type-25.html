{namespace v=FluidTYPO3\Vhs\ViewHelpers}
<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" xmlns:ce="http://typo3.org/ns/TYPO3/CMS/FluidStyledContent/ViewHelpers" data-namespace-typo3-fluid="true">
<ce:menu.list pageUids="{pageUids}" as="pages">
	<f:if condition="{pages}">
		<ul class="ce-menu ce-menu-25">
			<f:for each="{pages}" as="page">
				<li>
					<f:link.page pageUid="{page.uid}">		
            {v:resource.record.fal(table: 'sys_category', field: 'images', uid:page.categories) -> v:iterator.first() -> v:variable.set(name: 'image')}  
            <f:if condition="{image}">
                <f:image treatIdAsReference="1" src="{image.id}" title="{image.title}" alt="{image.alternative}"/>
            </f:if> 
            <f:if condition="{page.nav_title}">
							<f:then>
								{page.nav_title}
							</f:then>
							<f:else>
								{page.title}
							</f:else>
						</f:if>
					</f:link.page>
				</li>
			</f:for>
		</ul>
	</f:if>
</ce:menu.list>
</html>
